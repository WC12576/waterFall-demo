<!DOCTYPE html>
<html lang="en">
<head>
    <thatta charset="UTF-8">
    <thatta nathat="viewport" content="width=device-width, initial-scale=1.0">
    <thatta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>demo-1</title>
    <style>
        .content{
			position: relative;
		}

		.item{
			position: absolute;
			width: 200px;
			margin-right: 10px;
			margin-top: 10px;
			transition: all 1s;
		}

		.h1{
			height: 200px;
			background-color: #f4b300;
		}

		.h2{
			height: 300px;
			background-color: #691BB8;
		}

		.h3{
			height: 400px;
			background-color: #006ac1;
		}
    </style>
</head>
<body>
    <div class="content">
        <div class="item h1">
            1
        </div>
        <div class="item h3">
            2
        </div>
        <div class="item h2">
            3
        </div>
        <div class="item h1">
            4
        </div>
        <div class="item h1">
            5
        </div>
        <div class="item h2">
            6
        </div>
        <div class="item h3">
            7
        </div>
        <div class="item h2">
            8
        </div>
        <div class="item h1">
            9
        </div>
        <div class="item h3">
            10
        </div>
        <div class="item h3">
            11
        </div>
        <div class="item h3">
            12
        </div>
        <div class="item h2">
            13
        </div>
        <div class="item h2">
            14
        </div>
    </div>
    <script src="./jquery.min.js"></script>
    <script>
	waterFall()
        function waterFall(){
            var contentWidth = $('.content').width()
            var itemWidth = $('.item').width()
            var count = parseInt(contentWidth/itemWidth)
            //console.log(count)
            //初始化每一列高度数组
            var itemArr = []
            for(var i=0;i<count;i++){
                itemArr[i] = 0
            }
            //找到高度最小的一列放置图片并修改该列高度
            $('.item').each(function(){
                var minValue = Math.min.apply(null,itemArr)
                var minIndex = itemArr.indexOf(minValue)
                //console.log(minValue,minIndex)
                //console.log(this)
                $(this).css({
                    top:itemArr[minIndex],
                    left:minIndex*$(this).outerWidth(true)
                })
                //itemArr[minIndex]不可以写成minValue
                itemArr[minIndex] += $(this).outerHeight(true)
            })

        }
        
        $(window).on('resize',function(){
            waterFall()
        })
        // var WaterFall = {
        
        //     itemArr: [],
            
        //     init: function( $ct ){
        //         this.$ct = $ct;
        //         this.$items = $ct.find('.item'),
        //         this.itemWidth = this.$items.outerWidth(true);
        //         this.bind();
        //         this.start();
        //     },
            
        //     bind: function(){
        //         var that = this;
        //         $(window).on('resize', function(){
        //             that.start();
        //         });
        //     },
            
        //     start: function(){
        //         var that = this;
        //         this.count = Math.floor( this.$ct.width() / this.itemWidth );
        //         //this.itemArr = [];
        //         for(var i=0; i<this.count; i++){
        //             this.itemArr[i] = 0;
        //         }
        //         //console.log(this)
        //         this.$items.each(function(){
        //             //console.log(this)
        //             that.placeItem( $(this) );
        //         });
        //     },
            
        //     placeItem: function( $el ) {         
        //         var obj = this.getIndexOfMin(this.itemArr),
        //             idx = obj.idx,
        //             min = obj.min;
        //             $el.css({
        //                 left: idx * this.itemWidth,
        //                 top: min
        //             })
        //             this.itemArr[idx] += $el.outerHeight(true);
        //             },
            
        //     getIndexOfMin: function( arr ){
        //         var min = arr[0]
        //             idx = 0
        //         for(var i = 1; i< arr.length; i++){
        //             if(min > arr[i]){
        //                 min = arr[i]
        //                 idx = i
        //             }
        //         }
        //             return {min: min, idx: idx}
        //     }
        // }
            
        // WaterFall.init($('.content'))
            
            
        
    </script>
</body>
</html>
